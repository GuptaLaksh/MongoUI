{% extends 'base.html' %} {% load static %} {% block title %}Documents{% endblock %}


<!-- /home/itpauser/donkeyUI/ace/static/ace/home.css -->

<head>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(document).ready(function () {
      $("#myTab li:eq(1) a").tab("show"); // show second tab (0-indexed, like an array)
    });
  </script>
</head>

{% block css %}

<link rel="stylesheet" type="text/css" href="{% static 'main/home.css' %}">


<link rel="stylesheet" type="text/css" href="{% static 'side/doc.css' %}">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


{% endblock %} {% block content %}
<!--
 {% block script %}
 <link rel="stylesheet" type="text/js" href="{% static 'main/documents.js' %}">

 {% endblock script %}
-->
<div class="container" style="overflow: hidden;">
  <header>
    <a href="{% url 'showdbs' %}"><img class="logo" src="{% static 'images/microbots.png' %}"></a>


    <span class="greetings"><a href="{% url 'logout' %}"><button class="w-100 btn btn-outline-dark">
          <h5>Log Out</h5>
        </button></a></span>
    <span class="greetings">
      <h5 class="username">Hi <b>{{ user.username }}</b>!</h5>
    </span>
  </header>
  <hr>
  <nav>
    <p>
      <b>
        <h5>
          <a href="{% url 'showcollections' db=db %}"><button>{{collection}}</button>
          </a>
          <a href="{% url '_insertdocument' db=db collection=collection %}"><button class="right"><b>Insert
                Document</b></button></a>
          <a href="{% url '_insertdocumentBulk' db=db collection=collection %}"><button class="right"><b>Bulk Insert
                Documents</b></button></a>
        </h5>
      </b>
    </p>
  </nav>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(function () {
    $('.always').change(function () {                
       $('#advance').toggle(this.checked);
    }).change(); //ensure visible state matches initially
  });
</script>


<div class="container" style="overflow: hidden;">
  <form action="" method="post">
    {% csrf_token %}
    {{form.key}}{{form.value}}
    Advance <input type="checkbox" class="always" />
    <span id="advance">
        {{form.query}}{{form.projection}}
    </span>
    <button><svg height=15 width=15 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>
      <input type="hidden" name="Find" class"btn btn-primary" style="height:60px;">Find </button>
   
  </form>
  <button class="pull-right" ><svg height=15 width=15 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M576 384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64H512C547.3 64 576 92.65 576 128V384zM271 208.1L318.1 256L271 303C261.7 312.4 261.7 327.6 271 336.1C280.4 346.3 295.6 346.3 304.1 336.1L352 289.9L399 336.1C408.4 346.3 423.6 346.3 432.1 336.1C442.3 327.6 442.3 312.4 432.1 303L385.9 256L432.1 208.1C442.3 199.6 442.3 184.4 432.1 175C423.6 165.7 408.4 165.7 399 175L352 222.1L304.1 175C295.6 165.7 280.4 165.7 271 175C261.7 184.4 261.7 199.6 271 208.1V208.1z"/></svg>
    <a href="{% url 'showdocs' db=db collection=collection%}">ClearFilter</a></button>
  <div style="overflow: hidden;">
  <form action="" method="post">
    {% csrf_token %}
    <div style="overflow:hidden"  >
    
      <span style:"float:right;">
        {{exportform.options}}
  
    <button><svg width=15 height=15 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M192 312C192 298.8 202.8 288 216 288H384V160H256c-17.67 0-32-14.33-32-32L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48v-128H216C202.8 336 192 325.3 192 312zM256 0v128h128L256 0zM568.1 295l-80-80c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94L494.1 288H384v48h110.1l-39.03 39.03C450.3 379.7 448 385.8 448 392s2.344 12.28 7.031 16.97c9.375 9.375 24.56 9.375 33.94 0l80-80C578.3 319.6 578.3 304.4 568.1 295z"/></svg>
      <input type="hidden" name="export" >Export All Queried Docs</button>
    </span>
    </div>
  </form>
</div>
<hr>
</div>



<div class="container">

  <table>
    <thead>
      <tr>
        <th>View</th>
        <th>Edit</th>
        <th>Delete</th>
        {% for key in keylist %}
        <th scope='col'>{{key}}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
    
      {% for id, doc in tuplist %}
      <tr>
        <td class="prime headcol" id="view">
          <a href="{% url '_viewdocument' db=db collection=collection pk=id %}"><button type="button"
              class="btn btn-success">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill"
                viewBox="0 0 16 16">
                <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"></path>
                <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z">
                </path>
              </svg>

            </button>
          </a>
        </td>
        <td class="prime headcol1">
          <a href="{% url '_editdocument' db=db collection=collection pk=id %}"><button type="button"
              class="btn btn-info">
              <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">

                <path
                  d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z" />
              </svg>
            </button>
          </a>
        </td>
        {% if db in primelist %}
        <td class="prime">
          <button type="button" class="btn btn-outline-danger" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill"
              viewBox="0 0 16 16">
              <path
                d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z">
              </path>
            </svg></button>
        </td>
        {% else %}
        <td class="prime headcol2">
          <a href="{% url '_deletedocument' db=db collection=collection pk=id %} "
            onclick="return confirm('Are you sure you want to delete this document ?');">
            <button type="button" class="btn btn-outline-danger">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-trash-fill" viewBox="0 0 16 16">
                <path
                  d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z">
                </path>
              </svg></button>
          </a>
        </td>
        {% endif %}

        {% for val in doc.values %}
        <td>{{val}}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="container" style="overflow: hidden;">
  {% if db in primelist %}

  <input type="input" placeholder="{{collection}}" name="newname" size="22" disabled>
  <button type="button" class="btn btn-warning" disabled>
    <svg width="16" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
      <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
      <path
        d="M421.7 220.3L188.5 453.4L154.6 419.5L158.1 416H112C103.2 416 96 408.8 96 400V353.9L92.51 357.4C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6L137.6 429.6C143.1 427.7 149.8 424.2 154.6 419.5L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3zM492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75z" />
    </svg> </button>

  {% else %}

  <form action="" method="post">
    {% csrf_token %}
    <input type="input" placeholder="{{collection}}" name="newname" size="22">
    <a href="{% url '_renamedatabase' db=db %}">
      <button type="button" class="btn btn-warning">
        <svg width="16" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
          <path
            d="M421.7 220.3L188.5 453.4L154.6 419.5L158.1 416H112C103.2 416 96 408.8 96 400V353.9L92.51 357.4C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6L137.6 429.6C143.1 427.7 149.8 424.2 154.6 419.5L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3zM492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75z" />
        </svg>
    </a>
    </button>
  </form>

  {% endif %}
</div>

{% endblock %}